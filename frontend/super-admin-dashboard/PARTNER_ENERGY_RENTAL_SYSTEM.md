# π”‹ ννΈλ„ μ—λ„μ§€ λ νƒ μ‹μ¤ν… κ°λ° κ³„ν

**μ‘μ„±μΌ**: 2025λ…„ 1μ›” 22μΌ
**λ©ν‘**: μνΌμ–΄λ“λ―Όμ΄ μ™Έλ¶€ μ—λ„μ§€ κ³µκΈ‰μ—…μ²΄λ΅λ¶€ν„° κµ¬λ§¤ν• μ—λ„μ§€λ¥Ό ννΈλ„μ‚¬μ—κ² λ§μ§„μ„ λ¶™μ—¬ λ νƒν•λ” μ™„μ „ν• λΉ„μ¦λ‹μ¤ μ‹μ¤ν… κµ¬ν„

## π― **λΉ„μ¦λ‹μ¤ λ¨λΈ**

```
μ™Έλ¶€ μ—λ„μ§€ κ³µκΈ‰μ—…μ²΄ β†’ μνΌμ–΄λ“λ―Ό(λ³Έμ‚¬) β†’ ννΈλ„μ‚¬ β†’ μµμΆ… μ‚¬μ©μ
     [κµ¬λ§¤κ°€κ²©]      [λ§μ§„ μ¶”κ°€]    [ννΈλ„ λ§μ§„]
```

### **μμµ κµ¬μ΅°**
- **κµ¬λ§¤κ°€**: μ™Έλ¶€ κ³µκΈ‰μ—…μ²΄μ—μ„ μ—λ„μ§€ κµ¬λ§¤ν•λ” μ›κ°€
- **λ νƒκ°€**: ννΈλ„μ‚¬μ—κ² νλ§¤ν•λ” κ°€κ²© (κµ¬λ§¤κ°€ + λ§μ§„)
- **λ§μ§„**: λ³Έμ‚¬μ μμµ = λ νƒκ°€ - κµ¬λ§¤κ°€

## π“ **μ‹μ¤ν… μ”κµ¬μ‚¬ν•­**

### **1. μ—λ„μ§€ κµ¬λ§¤ κ΄€λ¦¬**
- μ™Έλ¶€ κ³µκΈ‰μ—…μ²΄λ³„ κµ¬λ§¤ λ‹¨κ°€ κ΄€λ¦¬
- λ€λ‰ κµ¬λ§¤ ν• μΈμ¨ μ μ©
- κµ¬λ§¤ λ‚΄μ—­ μ¶”μ 

### **2. ννΈλ„ μ—λ„μ§€ ν• λ‹Ή**
- ννΈλ„μ‚¬λ³„ μ—λ„μ§€ ν• λ‹Ήλ‰ μ„¤μ •
- λ§μ§„μ¨ μ„¤μ • (ννΈλ„ λ“±κΈ‰λ³„ μ°¨λ“± μ μ©)
- λ νƒ μ”κΈ μλ™ κ³„μ‚°

### **3. μ‚¬μ©λ‰ μ¶”μ  λ° μ •μ‚°**
- ννΈλ„μ‚¬λ³„ μ‹¤μ‹κ°„ μ—λ„μ§€ μ‚¬μ©λ‰ λ¨λ‹ν„°λ§
- μλ™ μ •μ‚° μ‹μ¤ν… (μ„ λ¶/ν›„λ¶)
- λ―Έλ‚© κ΄€λ¦¬

### **4. μμµμ„± λ¶„μ„**
- μ‹¤μ‹κ°„ λ§μ§„ λ¶„μ„
- ννΈλ„λ³„ μμµμ„± λ¦¬ν¬νΈ
- μ—λ„μ§€ κµ¬λ§¤ vs λ νƒ μμµ λ€μ‹λ³΄λ“

## π”§ **κµ¬ν„ κ³„ν**

### **Phase 1: λ°±μ—”λ“ API κ°λ°**

#### **1.1 λ°μ΄ν„° λ¨λΈ**
```python
# ννΈλ„ μ—λ„μ§€ ν• λ‹Ή
class PartnerEnergyAllocation(Base):
    partner_id: str
    allocated_amount: int        # ν• λ‹Ήλ μ—λ„μ§€λ‰
    purchase_price: float        # κµ¬λ§¤ λ‹¨κ°€
    markup_percentage: float     # λ§μ§„μ¨
    rental_price: float         # λ νƒ λ‹¨κ°€
    billing_cycle: str          # μ •μ‚° μ£ΌκΈ°
    status: str                 # active, suspended, expired

# ννΈλ„ μ—λ„μ§€ μ‚¬μ©λ‰
class PartnerEnergyUsage(Base):
    partner_id: str
    allocation_id: str
    used_amount: int            # μ‚¬μ©λ‰
    usage_date: datetime
    cost: float                 # μ‚¬μ© λΉ„μ©
    billing_status: str         # pending, billed, paid
```

#### **1.2 API μ—”λ“ν¬μΈνΈ**
```
POST   /api/v1/partners/{partner_id}/energy/allocate     # μ—λ„μ§€ ν• λ‹Ή
GET    /api/v1/partners/{partner_id}/energy/allocations  # ν• λ‹Ή λ©λ΅
POST   /api/v1/partners/{partner_id}/energy/usage        # μ‚¬μ©λ‰ κΈ°λ΅
GET    /api/v1/partners/{partner_id}/energy/usage        # μ‚¬μ©λ‰ μ΅°ν
GET    /api/v1/partners/{partner_id}/energy/billing      # μ •μ‚° μ •λ³΄
GET    /api/v1/admin/energy/revenue-analytics            # μμµ λ¶„μ„
PUT    /api/v1/admin/energy/pricing                      # λ§μ§„ μ„¤μ •
```

### **Phase 2: ν”„λ΅ νΈμ—”λ“ UI κ°λ°**

#### **2.1 ννΈλ„ μ—λ„μ§€ κ΄€λ¦¬ νμ΄μ§€**
- `/partners/{id}/energy` - ννΈλ„λ³„ μ—λ„μ§€ κ΄€λ¦¬
- μ—λ„μ§€ ν• λ‹Ή μΈν„°νμ΄μ¤
- μ‹¤μ‹κ°„ μ‚¬μ©λ‰ λ¨λ‹ν„°λ§
- μ •μ‚° ν„ν™© λ€μ‹λ³΄λ“

#### **2.2 μμµμ„± λ¶„μ„ λ€μ‹λ³΄λ“**
- `/energy/revenue-analytics` - μ „μ²΄ μμµ λ¶„μ„
- λ§μ§„μ¨ μ„¤μ • μΈν„°νμ΄μ¤
- ννΈλ„λ³„ μμµμ„± λΉ„κµ
- μ—λ„μ§€ κµ¬λ§¤ vs λ νƒ μμµ μ°¨νΈ

#### **2.3 μ—λ„μ§€ λ§μ§„ κ΄€λ¦¬**
- `/energy/pricing` - λ§μ§„ μ„¤μ • νμ΄μ§€
- ννΈλ„ λ“±κΈ‰λ³„ μ°¨λ“± λ§μ§„
- λ™μ  κ°€κ²© μ΅°μ •
- μ‹μ¥ κ°€κ²© μ—°λ™

### **Phase 3: ν†µν•© ν…μ¤νΈ λ° μµμ ν™”**

#### **3.1 λ°±μ—”λ“ API ν…μ¤νΈ**
- μ—λ„μ§€ ν• λ‹Ή API ν…μ¤νΈ
- μ‚¬μ©λ‰ μ¶”μ  μ •ν™•μ„± κ²€μ¦
- μ •μ‚° λ΅μ§ κ²€μ¦
- μμµμ„± κ³„μ‚° μ •ν™•μ„± ν™•μΈ

#### **3.2 ν”„λ΅ νΈμ—”λ“ ν†µν•© ν…μ¤νΈ**
- λ¨λ“  νμ΄μ§€ λ°±μ—”λ“ μ—°λ™ ν™•μΈ
- μ‹¤μ‹κ°„ λ°μ΄ν„° λ™κΈ°ν™” ν…μ¤νΈ
- μ—λ¬ ν•Έλ“¤λ§ κ²€μ¦

## π“… **κ°λ° μΌμ •**

### **Day 1: λ°±μ—”λ“ API κ°λ°**
- [x] κ°λ° κ³„ν μλ¦½
- [ ] λ°μ΄ν„° λ¨λΈ μƒμ„±
- [ ] API μ—”λ“ν¬μΈνΈ κµ¬ν„
- [ ] λΉ„μ¦λ‹μ¤ λ΅μ§ κµ¬ν„
- [ ] API ν…μ¤νΈ

### **Day 2: ν”„λ΅ νΈμ—”λ“ UI κ°λ°**
- [ ] ννΈλ„ μ—λ„μ§€ κ΄€λ¦¬ νμ΄μ§€
- [ ] μμµμ„± λ¶„μ„ λ€μ‹λ³΄λ“
- [ ] λ§μ§„ μ„¤μ • μΈν„°νμ΄μ¤
- [ ] API ν΄λΌμ΄μ–ΈνΈ μ—°λ™

### **Day 3: ν†µν•© ν…μ¤νΈ λ° κ²€μ¦**
- [ ] μ „μ²΄ μ‹μ¤ν… ν†µν•© ν…μ¤νΈ
- [ ] λΉ„μ¦λ‹μ¤ λ΅μ§ κ²€μ¦
- [ ] μ„±λ¥ μµμ ν™”
- [ ] λ¬Έμ„ν™” μ™„λ£

## π” **ν•µμ‹¬ λΉ„μ¦λ‹μ¤ λ΅μ§**

### **λ§μ§„ κ³„μ‚° κ³µμ‹**
```python
# λ νƒκ°€ = κµ¬λ§¤κ°€ Γ— (1 + λ§μ§„μ¨)
rental_price = purchase_price * (1 + markup_percentage / 100)

# μ΄ μμµ = (λ νƒκ°€ - κµ¬λ§¤κ°€) Γ— μ‚¬μ©λ‰
total_profit = (rental_price - purchase_price) * used_amount
```

### **ννΈλ„ λ“±κΈ‰λ³„ μ°¨λ“± λ§μ§„**
```python
partner_tier_margins = {
    'enterprise': 0.15,  # 15% λ§μ§„ (λ€κΈ°μ—…)
    'business': 0.25,    # 25% λ§μ§„ (μ¤‘μ†κΈ°μ—…)
    'startup': 0.35      # 35% λ§μ§„ (μ¤νƒ€νΈμ—…)
}
```

## π― **μ„±κ³µ μ§€ν‘**

### **κΈ°λ¥μ  λ©ν‘**
- [ ] ννΈλ„μ‚¬λ³„ μ—λ„μ§€ ν• λ‹Ή μ‹μ¤ν… μ™„μ„±
- [ ] μ‹¤μ‹κ°„ μ‚¬μ©λ‰ μ¶”μ  μ‹μ¤ν… κµ¬μ¶•
- [ ] μλ™ μ •μ‚° μ‹μ¤ν… κµ¬ν„
- [ ] μμµμ„± λ¶„μ„ λ€μ‹λ³΄λ“ μ™„μ„±

### **λΉ„μ¦λ‹μ¤ λ©ν‘**
- [ ] λ§μ§„μ¨ κΈ°λ° μμµ μµμ ν™”
- [ ] ννΈλ„μ‚¬λ³„ μ°¨λ“± μ”κΈμ  κµ¬ν„
- [ ] μ‹¤μ‹κ°„ μμµμ„± λ¨λ‹ν„°λ§
- [ ] μλ™ν™”λ μ •μ‚° ν”„λ΅μ„Έμ¤

---

**λ‹¤μ λ‹¨κ³„**: Phase 1 λ°±μ—”λ“ API κ°λ° μ‹μ‘
